TITLE "Parameterized Counter Mod N";

PARAMETERS( N = 10 );
CONSTANT W = CEIL(LOG2(N+1));

SUBDESIGN cnt_modn
(
    clk, rst : INPUT;          
    q[W-1..1], cout : OUTPUT;
)

VARIABLE
    aux : NODE;
    cnt[W..1] : DFF;

BEGIN
	cnt[].clk = clk;
	
    IF rst THEN
        aux = GND;
        cnt[] = 0;
    ELSIF cnt[] == N-1 THEN
        aux = VCC;
        cnt[] = 0;
    ELSE
        cnt[] = cnt[] + 1;
    END IF;

    cout = aux;
	q[] = cnt[W-1..1];
END;
